(function($) {
	$.fn.styledSelect = function() {
		return this.each(function() {

		var $this = $(this),
			numberOfOptions = $(this).children('option').length;

		$this.addClass('s-hidden');

		$this.wrap('<div class="styledSelect'+(($this.attr("data-class")) ? " "+$this.attr("data-class") : "")+'"></div>');

		$this.after('<div class="select"></div>');

		var $styledSelect = $this.next('div.select');

		var $selected = $this.children('option:selected');
		var $contentSelected = (($selected.attr("data-photo")) ? '<img src="'+$selected.attr("data-photo")+'" />' : "") + (($selected.attr("data-icon")) ? '<span class="ir ico '+$selected.attr("data-icon")+'"></span>' : "") + $selected.text();

		$styledSelect.html($contentSelected);

		var $list = $('<ul />', {
			'class': 'options'
		}).insertAfter($styledSelect);

		for (var i = 0; i < numberOfOptions; i++) {
			var content = (($this.children('option').eq(i).attr("data-photo")) ? '<img src="'+$this.children('option').eq(i).attr("data-photo")+'" />' : "") + (($this.children('option').eq(i).attr("data-icon")) ? '<span class="ir ico '+$this.children('option').eq(i).attr("data-icon")+'"></span>' : "") + $this.children('option').eq(i).text();
			var $option = $this.children('option').eq(i);

			$('<li />', {
				html: content,
				rel: $this.children('option').eq(i).val(),
				"class": (($selected.val() == $option.val()) ? 'active' : '') +
							($option.attr('disabled') ? ' disabled' : ''),
				"data-photo": $option.attr("data-photo"),
				"data-icon": $option.attr("data-icon")
			}).appendTo($list);
		}

		var $listItems = $list.children('li');

		if($this.attr("data-error")){
			$this.parent().append('<div class="select__error">'+ $this.attr("data-error") +'</div><div class="select__ico select__ico--error"></div></div><div class="select__ico select__ico--ok"></div>');
		}

		$styledSelect.click(function(e) {
			e.stopPropagation();
			if (!$(this).hasClass("active")) {
				$('div.select.active').each(function() {
					$(this).removeClass('active').next('ul.options').hide();
				});
			}
			$(this).toggleClass('active').next('ul.options').toggle();
		});

		$listItems.click(function(e) {
			e.stopPropagation();
			var $selected = $(this);
			if ($selected.hasClass('disabled')){return;}
			var $contentSelected = (($selected.attr("data-photo")) ? '<img src="'+$selected.attr("data-photo")+'" />' : "") + (($selected.attr("data-icon")) ? '<span class="ir ico '+$selected.attr("data-icon")+'"></span>' : "") + $selected.text();
			$styledSelect.html($contentSelected).removeClass('active');

			if ($this.val() != $(this).attr('rel')) {
				$this.val($(this).attr('rel')).change();
			}

			$list.hide();
		});

		$(document).click(function() {
			$styledSelect.removeClass('active');
			$list.hide();
		});

	});
	};
})(jQuery);

/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});

!function(window,document,undefined){var absPos=function(element){var offsetLeft,offsetTop;offsetLeft=offsetTop=0;if(element.offsetParent){do{offsetLeft+=element.offsetLeft;offsetTop+=element.offsetTop}while(element=element.offsetParent)}return[offsetLeft,offsetTop]};var ProgressCircle=function(params){this.canvas=params.canvas;this.minRadius=params.minRadius||15;this.arcWidth=params.arcWidth||5;this.gapWidth=params.gapWidth||3;this.centerX=params.centerX||this.canvas.width/2;this.centerY=params.centerY||this.canvas.height/2;this.infoLineLength=params.infoLineLength||60;this.horizLineLength=params.horizLineLength||10;this.infoLineAngleInterval=params.infoLineAngleInterval||Math.PI/8;this.infoLineBaseAngle=params.infoLineBaseAngle||Math.PI/6;this.context=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height;this.circles=[];this.runningCount=0};ProgressCircle.prototype={constructor:ProgressCircle,addEntry:function(params){this.circles.push(new Circle({canvas:this.canvas,context:this.context,centerX:this.centerX,centerY:this.centerY,innerRadius:this.minRadius+this.circles.length*(this.gapWidth+this.arcWidth),arcWidth:this.arcWidth,infoLineLength:this.infoLineLength,horizLineLength:this.horizLineLength,id:this.circles.length,fillColor:params.fillColor,outlineColor:params.outlineColor,progressListener:params.progressListener,infoListener:params.infoListener,infoLineAngle:this.infoLineBaseAngle+this.circles.length*this.infoLineAngleInterval}));return this},start:function(interval){var self=this;this.timer=setInterval(function(){self._update()},interval||33);return this},stop:function(){clearTimeout(this.timer)},_update:function(){this._clear();this.circles.forEach(function(circle,idx,array){circle.update()});return this},_clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);return this}};var Circle=function(params){this.id=params.id;this.canvas=params.canvas;this.context=params.context;this.centerX=params.centerX;this.centerY=params.centerY;this.arcWidth=params.arcWidth;this.innerRadius=params.innerRadius||0;this.fillColor=params.fillColor||"#fff";this.outlineColor=params.outlineColor||this.fillColor;this.progressListener=params.progressListener;this.infoLineLength=params.infoLineLength||250;this.horizLineLength=params.horizLineLength||50;this.infoListener=params.infoListener;this.infoLineAngle=params.infoLineAngle;this.outerRadius=this.innerRadius+this.arcWidth;if(!this.infoListener)return;var angle=this.infoLineAngle,arcDistance=(this.innerRadius+this.outerRadius)/2,sinA=Math.sin(angle),cosA=Math.cos(angle);this.infoLineStartX=this.centerX+sinA*arcDistance;this.infoLineStartY=this.centerY-cosA*arcDistance;this.infoLineMidX=this.centerX+sinA*this.infoLineLength;this.infoLineMidY=this.centerY-cosA*this.infoLineLength;this.infoLineEndX=this.infoLineMidX+(sinA<0?-this.horizLineLength:this.horizLineLength);this.infoLineEndY=this.infoLineMidY;var infoText=document.createElement("div"),style=infoText.style;style.color=this.fillColor;style.position="absolute";style.left=this.infoLineEndX+absPos(this.canvas)[0]+"px";infoText.className="ProgressCircleInfo";infoText.id="progress_circle_info_"+this.id;document.body.appendChild(infoText);this.infoText=infoText};Circle.prototype={constructor:Circle,update:function(){this.progress=this.progressListener();this._draw();if(this.infoListener){this.info=this.infoListener();this._drawInfo()}},_draw:function(){var ctx=this.context,ANGLE_OFFSET=-Math.PI/2,startAngle=0+ANGLE_OFFSET,endAngle=startAngle+this.progress*Math.PI*2,x=this.centerX,y=this.centerY,innerRadius=this.innerRadius,outerRadius=this.outerRadius;ctx.fillStyle=this.fillColor;ctx.strokeStyle=this.outlineColor;ctx.beginPath();ctx.arc(x,y,innerRadius,startAngle,endAngle,false);ctx.arc(x,y,outerRadius,endAngle,startAngle,true);ctx.closePath();ctx.stroke();ctx.fill();return this},_drawInfo:function(){var pointList,lineHeight;pointList=[[this.infoLineStartX,this.infoLineStartY],[this.infoLineMidX,this.infoLineMidY],[this.infoLineEndX,this.infoLineEndY]];this._drawSegments(pointList,false);this.infoText.innerHTML=this.info;lineHeight=this.infoText.offsetHeight;this.infoText.style.top=this.infoLineEndY+absPos(this.canvas)[1]-lineHeight/2+"px";return this},_drawSegments:function(pointList,close){var ctx=this.context;ctx.beginPath();ctx.moveTo(pointList[0][0],pointList[0][1]);for(var i=1;i<pointList.length;++i){ctx.lineTo(pointList[i][0],pointList[i][1])}if(close){ctx.closePath()}ctx.stroke()}};window.ProgressCircle=ProgressCircle}(window,document);

/*jshint browser:true */
/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/
;(function( $ ){

  'use strict';

  $.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null,
      ignore: null
    };

    if(!document.getElementById('fit-vids-style')) {
      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js
      var head = document.head || document.getElementsByTagName('head')[0];
      var css = '.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';
      var div = document.createElement("div");
      div.innerHTML = '<p>x</p><style id="fit-vids-style">' + css + '</style>';
      head.appendChild(div.childNodes[1]);
    }

    if ( options ) {
      $.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        'iframe[src*="player.vimeo.com"]',
        'iframe[src*="youtube.com"]',
        'iframe[src*="youtube-nocookie.com"]',
        'iframe[src*="kickstarter.com"][src*="video.html"]',
        'object',
        'embed'
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var ignoreList = '.fitvidsignore';

      if(settings.ignore) {
        ignoreList = ignoreList + ', ' + settings.ignore;
      }

      var $allVideos = $(this).find(selectors.join(','));
      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch
      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.

      $allVideos.each(function(){
        var $this = $(this);
        if($this.parents(ignoreList).length > 0) {
          return; // Disable FitVids on this video.
        }
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))
        {
          $this.attr('height', 9);
          $this.attr('width', 16);
        }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('name')){
          var videoName = 'fitvid' + $.fn.fitVids._count;
          $this.attr('name', videoName);
          $.fn.fitVids._count++;
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
  
  // Internal counter for unique video names.
  $.fn.fitVids._count = 0;
// Works with either jQuery or Zepto
})( window.jQuery || window.Zepto );







(function(a) {
    a(document).ready(function() {
        function H() {
            D.each(function() {
                var b = "#" + a(this).attr("id");
                a(".krown-tabs").children(".contents").children("div").css("display", "block");
                if (a(this).hasClass("carousel")) {
                    var c = a(this),
                        e = a(this).find(".carousel-holder"),
                        f = a(this).find(".krown-id-item"),
                        d = a(this).find(".btn-next"),
                        l = a(this).find(".btn-prev"),
                        g = 0,
                        g = "block" == x.css("display") ? 2 : "block" == y.css("display") ? 3 : parseInt(e.data("visible"));
                    c.width();
                    parseInt(f.eq(0).css("marginLeft"));
                    var m = !0;
                    e.css("position",
                        "absolute");
                    f.css("left", 0);
                    c.data({
                        items: f,
                        visNo: e.data("visible"),
                        visWidth: c.width() + 2 * parseInt(f.eq(0).css("marginLeft")),
                        page: 0,
                        pages: Math.ceil(f.length / g) - 1
                    });
                    c = new Hammer(c[0]);
                    c.on("swipeleft", function(a) {
                        d.trigger("click")
                    });
                    c.on("swiperight", function(a) {
                        l.trigger("click")
                    });
                    d.on("click", function(b) {
                        var c = a(this).closest(".carousel"),
                            e = c.data("items"),
                            f = c.data("page"),
                            g = c.data("pages"),
                            n = c.data("visNo"),
                            h = c.data("visWidth");
                        if (m && f + 1 <= g) {
                            m = !1;
                            c.data("page",
                                ++f);
                            f + 1 <= g ? d.removeClass("disabled") : d.addClass("disabled");
                            0 <= f - 1 ? l.removeClass("disabled") : l.addClass("disabled");
                            var z = 0,
                                k = (f - 1) * n;
                            a.grep(e, function(a, b) {
                                b >= k ? e.eq(b).stop().delay(50 * z++).animate({
                                    left: -h * f
                                }, 200, "easeInQuint") : e.eq(b).stop().animate({
                                    left: -h * f
                                }, 0)
                            });
                            setTimeout(function() {
                                m = !0
                            }, 100 * n + 200)
                        }
                        b.preventDefault()
                    });
                    l.on("click", function(b) {
                        var c = a(this).closest(".carousel"),
                            e = c.data("items"),
                            f = c.data("page"),
                            g = c.data("pages"),
                            n = c.data("visNo"),
                            h = c.data("visWidth");
                        if (m && 0 <= f - 1) {
                            m = !1;
                            c.data("page", --f);
                            f + 1 <= g ? d.removeClass("disabled") : d.addClass("disabled");
                            0 <= f - 1 ? l.removeClass("disabled") : l.addClass("disabled");
                            var z = (f + 2) * n - 1,
                                k = z + 1;
                            a.grep(e, function(a, b) {
                                b < k ? e.eq(b).stop().delay(50 * z--).animate({
                                    left: -h * f
                                }, 200, "easeInQuint") : e.eq(b).stop().animate({
                                    left: -h * f
                                }, 0)
                            });
                            setTimeout(function() {
                                m = !0
                            }, 100 * n + 200)
                        }
                        b.preventDefault()
                    }).addClass("disabled")
                } else a(this).imagesLoaded(function() {
                    a(b).isotope({
                        itemSelector: ".krown-id-item",
                        layoutMode: "masonry"
                    })
                });
                setTimeout(function() {
                    a(".krown-tabs").children(".contents").children("div:nth-child(1n+2)").css("display",
                        "none")
                }, a(this).hasClass("carousel") ? 100 : 1E3)
            })
        }

        function I() {
            a(".krown-pie").each(function() {
                function b(a, b) {
                    h = 0;
                    clearInterval(g);
                    d.stop();
                    var f = 0,
                        e = b / a;
                    d.start(5);
                    g = setInterval(function() {
                        h += .0025;
                        f = Math.round(100 * h * e);
                        h >= a / 100 && (d.stop(), clearInterval(g), h = 0);
                        c.html(f + "<sup>%</sup>")
                    }, 5)
                }
                var c = a(this).find(".value"),
                    e = a(this).find(".pie-canvas")[0],
                    f = a(this).data("color"),
                    d = a(this).hasClass("large") ? new ProgressCircle({
                        canvas: e,
                        minRadius: 115,
                        arcWidth: 18,
                        centerX: 136,
                        centerY: 136
                    }) : new ProgressCircle({
                        canvas: e,
                        minRadius: 52,
                        arcWidth: 6,
                        centerX: 62,
                        centerY: 60
                    }),
                    g, h = 0;
                d.addEntry({
                    fillColor: f,
                    progressListener: function() {
                        return h
                    }
                });
                "0" != parseFloat(c.data("percent")) && b(Math.min(parseFloat(c.data("percent")), 100), parseFloat(c.text()))
            })
        }
        var J = a("html"),
            g = a("body"),
            B = "ontouchstart" in window;
        B && g.removeClass("no-touch").addClass("touch");
        g.removeClass("no-js");
        var k = "";
        var D = a(".krown-id-grid");
        if (0 < a(".krown-id-grid").length) {
            g.append('<div id="responsive-test"><div id="p780"></div><div id="p580"></div><div>');
            var y = a("#p780"),
                x = a("#p580");
            a(".krown-id-grid").imagesLoaded(function() {
                H()
            });
            var E = a(window).width();
            a(window).on("resize", function() {
                E != a(window).width() && (E = a(window).width(), D.each(function() {
                    if (a(this).hasClass("carousel")) {
                        var b = a(this).find(".carousel-holder"),
                            c = a(this).find(".krown-id-item"),
                            e = 0,
                            e = a(this).closest(".krown-tabs"),
                            f = e.children(".contents").children("div");
                        f.each(function() {
                            a(this).data("display", a(this).css("display")).css("display", "block")
                        });
                        b.css("position", "absolute");
                        b.parent().css("height", b.height());
                        e = "block" == x.css("display") ? 2 : "block" == y.css("display") ? 3 : parseInt(b.data("visible"));
                        a(this).data({
                            items: c,
                            visNo: e,
                            visWidth: a(this).width() + 2 * parseInt(c.eq(0).css("marginLeft")),
                            page: 0,
                            pages: Math.ceil(c.length / e) - 1
                        });
                        c.css("left", 0);
                        a(this).find(".btn-prev").addClass("disabled");
                        a(this).find(".btn-next").removeClass("disabled");
                        f.each(function() {
                            a(this).css("display", a(this).data("display"))
                        })
                    } else e = a(this).closest(".krown-tabs"), f = e.children(".contents").children("div"),
                        f.each(function() {
                            "yes" != a(this).data("lock") && (a(this).data("lock", "yes"), a(this).data("display", a(this).css("display")).css("display", "block"))
                        }), setTimeout(function() {
                            f.each(function() {
                                a(this).css("display", a(this).data("display")).data("lock", "no")
                            })
                        }, 1E3)
                }))
            })
        }
        if (g.hasClass("single-ignition_product")) {
            var d = a("#project-sidebar");
            d.find(".product-wrapper, .id-product-proposed-end, .btn-container").wrapAll('<div class="panel clearfix">');
            d.find(".id-widget.ignitiondeck").removeClass("ignitiondeck");
            d.find("#project-p-author").appendTo(d.find(".separator"));
            d.find(".poweredbyID").appendTo(d);
            d.find(".main-btn").addClass("krown-button medium color");
            d.find(".id-progress-raised, .id-product-funding, .id-product-total, .id-product-pledges, .id-product-days, .id-product-days-to-go").wrapAll('<div class="rholder">');
            d.find(".id-progress-raised, .id-product-funding").wrapAll('<div class="rpdata">');
            d.find(".id-product-total, .id-product-pledges").wrapAll('<div class="rpdata">');
            d.find(".id-product-days, .id-product-days-to-go").wrapAll('<div class="rpdata">');
            d.find(".product-wrapper").addClass("clearfix");
            a(".id-level-desc:empty").remove();
            a(".ignitiondeck.idstretch").prev().addClass("idst");
            a(".id-widget .progress-percentage, .idstretch-percentage").each(function() {
                var b = parseFloat(a(this).text().replace(",", "")),
                    c = 99 < b ? themeObjects.pieColor3 : themeObjects.pieColor2;
                a(this).hasClass("idstretch-percentage") && (c = 99 < b ? themeObjects.pieColor3 : themeObjects.pieColor1);
                a(this).parent().html('<div class="krown-pie ' + (a(this).hasClass("idstretch-percentage") ? "small" :
                    "large") + '" data-color="' + c + '"><div class="holder"><span class="value" data-percent="' + b + '">' + b + "</span></div></div>")
            });
            d.find(".id-widget .krown-pie").clone().prependTo(d.find(".rtitle"));
            d.find(".rtitle").find(".krown-pie").removeClass("large").addClass("small");
            var u = a("#page-title"),
                p = d.find(".btn-container"),
                F = 0 < p.find("a").length ? !0 : !1,
                C = 90,
                A = !1,
                v = !0;
            g.append('<div id="responsive-test"><div id="p780"></div><div id="p580"></div><div>');
            y = a("#p780");
            x = a("#p580");
            F || (d.css("paddingBottom", "0"),
                C = -10);
            d.find(".rtitle").click(function() {
                if (v)
                    if (v = !1, A) a(this).removeClass("opened"), p.css("display", "none"), d.stop().animate({
                        height: 100
                    }, {
                        duration: 250,
                        easing: "easeInQuad",
                        step: function(a) {
                            u.css("paddingTop", a - 10)
                        },
                        complete: function() {
                            v = !0
                        }
                    }), A = !1;
                    else {
                        a(this).addClass("opened");
                        d.css("height", "auto");
                        var b = d.outerHeight();
                        d.css("height", 100);
                        d.stop().animate({
                            height: b
                        }, {
                            duration: 350,
                            easing: "easeInQuad",
                            step: function(a) {
                                u.css("paddingTop", a - 10)
                            },
                            complete: function() {
                                v = !0;
                                p.css({
                                    top: d.outerHeight() -
                                        225,
                                    display: "block"
                                })
                            }
                        });
                        A = !0
                    }
            });
            a(window).resize(function() {
                "block" == y.css("display") || "block" == x.css("display") ? (F || (d.css("paddingBottom", "0"), C = -10), A ? (d.css("height", "auto"), u.css("paddingTop", d.height() + C), p.css("top", d.height() - 125), p.css("display", "block")) : (d.css("height", 100), u.css("paddingTop", 90), p.css("display", "none"))) : (u.css("paddingTop", 0), d.css("height", "auto"), p.css("display", "block"));
                v = !0
            })
        }
        g.hasClass("archive") || (a(".backer_data .id-backer-links").insertAfter(".backer_title h3"),
            a(".backer_info .backer_title > p").appendTo(".backer_info"));
        if (0 < a(".dashboardmenu").length) {
            var G = a(".dashboardmenu").find("li"),
                k = '<div class="tabs-select"><select>';
            G.each(function() {
                k += "<option>" + a(this).find("a").text() + "</option>"
            });
            k += "</select></div>";
            a(".dashboardmenu").append(k).find(".tabs-select").find("select").change(function() {
                document.location.href = G.eq(a(this).find("option:selected").index()).find("a").prop("href")
            });
            a("#edit-profile").find(".form-row:nth-of-type(1), .form-row:nth-of-type(4), .form-row:nth-of-type(6), .form-row:nth-of-type(8), .form-row:nth-of-type(10)").addClass("first")
        }
        0 <
            a(".insert-map").length && a(".insert-map").each(function() {
                var b = a(this),
                    c, e = [{
                        featureType: "all",
                        elementType: "all",
                        stylers: [{
                            saturation: -100
                        }]
                    }];
                c = {
                    zoom: b.data("zoom"),
                    center: new google.maps.LatLng(b.data("map-lat"), b.data("map-long")),
                    streetViewControl: !1,
                    scrollwheel: !1,
                    panControl: !0,
                    mapTypeControl: !1,
                    overviewMapControl: !1,
                    zoomControl: !1,
                    draggable: B ? !1 : !0,
                    zoomControlOptions: {
                        style: google.maps.ZoomControlStyle.LARGE
                    },
                    mapTypeControlOptions: {
                        mapTypeIds: [google.maps.MapTypeId.ROADMAP, "krownMap"]
                    }
                };
                c =
                    new google.maps.Map(document.getElementById(b.attr("id")), c);
                "d-true" == b.data("greyscale") && (e = new google.maps.StyledMapType(e, {
                    name: "Grayscale"
                }), c.mapTypes.set("krownMap", e), c.setMapTypeId("krownMap"));
                "d-true" == b.data("marker") && (e = new google.maps.LatLng(b.data("map-lat"), b.data("map-long")), new google.maps.Marker({
                    position: e,
                    map: c,
                    icon: b.data("marker-img")
                }));
                setTimeout(function() {
                    b.animate({
                        opacity: 1
                    }, 400).parent().addClass("remove-preloader")
                }, 2E3)
            });
        a("p:empty").remove();
        g = a(".project-header").find(".video-container").children("iframe");
        0 < g.length && 0 < g.attr("src").indexOf("youtube") && (q = 0 < g.attr("src").indexOf("?") ? g.attr("src") + "&wmode=opaque" : g.attr("src") + "?wmode=opaque", g.attr("src", q));
        a("#content").fitVids();
        a(".touch #header #searchform").on("click.search", function(b) {
            a(this).addClass("hover").off("click.search");
            b.preventDefault()
        });
        a(".krown-accordion").each(function() {
            var b = a(this).hasClass("toggle") ? !0 : !1,
                c = a(this).children("section"),
                e = "-1" == a(this).data("opened") ? null : c.eq(parseInt(a(this).data("opened")));
            null != e &&
                (e.addClass("opened"), e.children("div").slideDown(0));
            a(this).children("section").children("h5").click(function() {
                var c = a(this).parent();
                b || null == e || (e.removeClass("opened"), e.children("div").stop().slideUp(300));
                c.hasClass("opened") && b ? (c.removeClass("opened"), c.children("div").stop().slideUp(300)) : c.hasClass("opened") || (e = c, c.addClass("opened"), c.children("div").stop().slideDown(300))
            })
        });
        a(".krown-form").each(function() {
            function b(a) {
                a.removeClass("contact-error-border");
                k.fadeOut()
            }
            var c = a(this).find("form"),
                e = a(this).find(".name"),
                f = a(this).find(".email"),
                d = a(this).find(".subject"),
                g = a(this).find(".message"),
                h = a(this).find(".success-message"),
                k = a(this).find(".error-message");
            e.focus(function() {
                b(a(this))
            });
            f.focus(function() {
                b(a(this))
            });
            d.focus(function() {
                b(a(this))
            });
            g.focus(function() {
                b(a(this))
            });
            c.submit(function(b) {
                function l(a) {
                    a.val(a.data("value"));
                    a.addClass("contact-error-border");
                    k.fadeIn()
                }
                var m = !0,
                    n = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                if (3 > e.val().length || e.val() == e.data("value")) l(e),
                    m = !1;
                "" != f.val() && f.val() != f.data("value") && n.test(f.val()) || (l(f), m = !1);
                if (5 > g.val().length || g.val() == g.data("value")) l(g), m = !1;
                a(this).hasClass("full") && (3 > d.val().length || d.val() == d.data("value")) && (l(d), m = !1);
                m && (c.fadeOut(), a.ajax({
                    type: c.prop("method"),
                    url: c.prop("action"),
                    data: c.serialize(),
                    success: function() {
                        h.fadeIn()
                    }
                }));
                b.preventDefault()
            })
        });
        a("img.alignleft, img.alignright, img.aligncenter").parent("a").each(function() {
            a(this).attr("class", "fancybox fancybox-thumb " + a(this).children("img").attr("class"))
        });
        if (0 < a(".fancybox").length || 0 < a('div[id*="attachment"]').length) a('.fancybox:not(.inline), div[id*="attachment"] > a').fancybox({
            padding: 0,
            margin: 50,
            aspectRatio: !0,
            scrolling: "no",
            mouseWheel: !1,
            openMethod: "zoomIn",
            closeMethod: "zoomOut",
            nextEasing: "easeInQuad",
            prevEasing: "easeInQuad"
        }).append("<span></span>"), a(".fancybox.inline").fancybox({
            padding: 0,
            maxWidth: 250,
            maxHeight: 300,
            fitToView: !1,
            width: "250px",
            height: "350px",
            autoSize: !1,
            closeClick: !1,
            openEffect: "none",
            closeEffect: "none"
        });
        0 < a(".krown-pie").length &&
            !J.hasClass("ie8") && (a(".krown-pie").each(function() {
                var b = a(this).hasClass("large") ? 274 : 122;
                a(this).find(".holder").append('<div class="pie-holder"><canvas class="pie-canvas" width="' + b + '" height="' + b + '"></canvas></div>')
            }), I());
        a(".krown-tabs").each(function() {
            var b = a(this).children(".titles").children("li"),
                c = a(this).children(".contents").children("div"),
                e = b.eq(0),
                d = c.eq(0),
                g = a(this).hasClass("fade") ? "fade" : "tab";
            e.addClass("opened");
            d.stop().slideDown(0);
            b.find("a").prop("href", "#").off("click");
            b.click(function(b) {
                e.removeClass("opened");
                e = a(this);
                e.addClass("opened");
                "fade" == g ? (d.stop().fadeOut(250), d = c.eq(a(this).index()), d.stop().delay(250).fadeIn(300)) : (d.stop().slideUp(250), d = c.eq(a(this).index()), d.stop().delay(250).slideDown(300));
                k && h.val(a(this).text());
                b.preventDefault()
            });
            if (a(this).hasClass("responsive-on")) {
                var l = '<div class="tabs-select"><select>';
                b.each(function() {
                    l += "<option>" + a(this).find("h5").text() + "</option>"
                });
                l += "</select></div>";
                a(this).children(".titles").append(l).find(".tabs-select").find("select").change(function() {
                    b.eq(a(this).find("option:selected").index()).trigger("click")
                })
            }
            var h =
                a(this).find(".tabs-select").find("select"),
                k = a(this).hasClass("responsive-on") ? !0 : !1
        });
        a(".krown-twitter.rotenabled").each(function() {
            var b = a(this).children("ul").children("li"),
                c = 0;
            setInterval(function() {
                b.eq(c).fadeOut(250);
                ++c == b.length && (c = 0);
                b.eq(c).delay(260).fadeIn(300)
            }, 6E3)
        });
        a(".flexslider.mini").each(function() {
            var b = a(this);
            1 < b.find("li").length ? a(this).fitVids().flexslider({
                animation: "slide",
                easing: "easeInQuad",
                animationSpeed: 300,
                slideshow: !0,
                directionNav: !0,
                controlNav: !1,
                keyboard: !1,
                start: function(a) {
                    if (!a.container) return;
                    a.container.delay(131).animate({
                        opacity: 1
                    }, 300)
                }
            }) : b.removeClass("flexslider")
        });
        a(".rev_slider_wrapper").find("video").data("no-mejs", "true");
        0 < a("#content").find("audio, video").length && (a("#content").find("video").attr({
            width: "100%",
            height: "100%",
            style: "width:100%;height:100%"
        }), a("#content").find("audio, video").each(function() {
            "true" != a(this).data("no-mejs") && a(this).mediaelementplayer({
                alwaysShowControls: !1,
                iPadUseNativeControls: !1,
                iPhoneUseNativeControls: !1,
                AndroidUseNativeControls: !1,
                enableKeyboard: !1,
                pluginPath: themeObjects.base + "/js/mediaelement/",
                success: function() {
                    a(window).trigger("resize")
                }
            })
        }));
        a(window).on("scroll.menu", function() {
        	500 > a(this).scrollTop() || 500 < a(this).scrollTop() 
        });
        a(window).trigger("scroll")
    })
})(jQuery);